在你的Token案例中添加缓存上下文（[[自定义 Token]]），特别是当Token的内容依赖于当前URL路径时，非常有用。
==缓存上下文告诉Drupal缓存系统如何对待缓存的生成和无效化==，确保缓存的内容是基于特定条件动态变化的。添加了`url.path`缓存上下文后，Drupal就能理解缓存内容应该基于当前访问的URL路径来区分。

### 为什么需要缓存上下文

在Drupal中，缓存系统默认情况下会尽可能地重用缓存内容，以提高性能和减少服务器负载。这意味着，如果没有明确的指示，Drupal可能会错误地展示相同的缓存内容给所有URL路径。`例如`，如果你有一个基于当前查看的节点动态显示信息的Token，并且这个Token被用在一个全站可见的块中，不添加正确的缓存上下文可能导致所有节点页面显示相同的Token替换结果。

### 缓存上下文的作用

通过添加`url.path`缓存上下文，你确保了Drupal知道块或页面的内容依赖于URL路径，因此对于不同的路径，Drupal应该生成和存储不同的缓存版本。这样，即使是使用同一个基础块，在不同的节点页面上也能显示基于该节点内容动态生成的Token值。

### 示例应用

假设你的Token代表了“当前节点的标题”，并且你在一个全站可见的块中使用了这个Token。如果不添加`url.path`缓存上下文，所有页面上的块可能都会显示第一次被缓存时的那个节点标题。添加了`url.path`缓存上下文后，Drupal会为每个不同的节点URL生成和展示不同的块缓存，因此块内容会正确地反映每个页面上当前节点的标题。

### 结论

简而言之，添加缓存上下文是确保Drupal正确处理基于上下文变化（如URL路径变化）的动态内容的关键。这对于提升用户体验和展示准确的页面内容至关重要，特别是在高度动态的网站中，内容经常依赖于特定的上下文信息。在你的Token案例中，这确保了每个页面都能展示正确的、基于当前页面节点内容的Token替换结果，而不是错误地重用错误的缓存数据。

