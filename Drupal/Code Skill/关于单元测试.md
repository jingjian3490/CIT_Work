#### 流程

```php
1. 复制由测试提供的 Features 文件到 ../{profile}/features 目录下面  
2. 在docroot 目录执行 composer gherphalizer 命令生成测试方法文件  
3. 在 ../{profile}/test/src/functional/{profile}.php 文件里面编写单元测试  
4. 在docroot目录下面执行该命令运行单元测试
```
前置：==把 phpunit.xml 文件放在 docroot 下面==
![[Pasted image 20231115100349.png]]
==phpunit.xml==
```XML
<?xml version="1.0" encoding="UTF-8"?>

<phpunit bootstrap="./app/core/tests/bootstrap.php" colors="true"
         beStrictAboutTestsThatDoNotTestAnything="true"
         beStrictAboutOutputDuringTests="true"
         beStrictAboutChangesToGlobalState="true"
         printerClass="\Drupal\Tests\Listeners\HtmlOutputPrinter">
    <php>
        <ini name="error_reporting" value="32767"/>
        <ini name="memory_limit" value="-1"/>
        <env name="SIMPLETEST_BASE_URL" value="https://pfgancjp.ddev.site/"/>
        <env name="SIMPLETEST_DB" value="mysql://db:db@db:3306/db"/>
        <env name="BROWSERTEST_OUTPUT_DIRECTORY" value="app/sites/simpletest/browser_output"/>
        <env name="SYMFONY_DEPRECATIONS_HELPER" value="disabled"/>
    </php>
    <testsuites>
        <testsuite name="site">
            <directory>./app/profiles/ganclassjp_profile/tests/</directory>
        </testsuite>
    </testsuites>
    <listeners>
        <listener class="\Drupal\Tests\Listeners\DrupalListener">
        </listener>
        <!-- The Symfony deprecation listener has to come after the Drupal listener -->
        <listener class="Symfony\Bridge\PhpUnit\SymfonyTestsListener">
        </listener>
    </listeners>
</phpunit>
```

![[Pasted image 20231115100603.png]]
![[Pasted image 20231115100628.png]]

```HTML
<div class="swiper-slide swiper-slide-visible swiper-slide-fully-visible swiper-slide-active" style="width: 1110px; opacity: 1; transform: translate3d(-1110px, 0px, 0px); transition-duration: 1000ms;" role="group" aria-label="2 / 2" data-swiper-slide-index="1">
              <div class="field__item">  <div class="paragraph paragraph--type--banner paragraph--view-mode--homepage">
          <div class="banner-des">
        <div class="des-container">
          
            <div class="clearfix text-formatted field field--name-field-title field--type-text field--label-hidden field__item"><div class="blue-style">WORRIED ABOUT COVID-19?</div></div>
      
          
            <div class="clearfix text-formatted field field--name-field-description field--type-text-long field--label-hidden field__item"><p><span>Learn the facts of COVID-19 and protect yourself against it.</span></p></div>
      
          
            <div class="field field--name-field-link field--type-link field--label-hidden field__item"><a href="/covid-19" sc:linkname="home | banner navigation | covid-19" undefined="1">Learn More</a></div>
      
        </div>
      </div>
      
            <div class="field field--name-field-pc-image field--type-entity-reference field--label-hidden field__item"><article class="media media--type-image media--view-mode-default">
  
      
  <div class="field field--name-field-media-image field--type-image field--label-visually_hidden">
    <div class="field__label visually-hidden">Image</div>
              <div class="field__item">  <img src="/sites/default/files/2023-11/home_banner02_pc.jpg" width="1436" height="593" alt="home_banner02_pc.jpg" loading="lazy">

</div>
          </div>

  </article>
</div>
      
      
            <div class="field field--name-field-mb-image field--type-entity-reference field--label-hidden field__item"><article class="media media--type-image media--view-mode-default">
  
      
  <div class="field field--name-field-media-image field--type-image field--label-visually_hidden">
    <div class="field__label visually-hidden">Image</div>
              <div class="field__item">  <img src="/sites/default/files/2023-11/home_banner02_mb.jpg" width="390" height="390" alt="home_banner02_mb.jpg" loading="lazy">

</div>
          </div>

  </article>
</div>
      
      </div>
</div>
            </div>
```

```HTML
<div class="swiper-slide swiper-slide-visible swiper-slide-fully-visible swiper-slide-active" style="width: 1110px; opacity: 1; transform: translate3d(-1110px, 0px, 0px); transition-duration: 0ms;" role="group" aria-label="1 / 2" data-swiper-slide-index="0">
              <div class="field__item">  <div class="paragraph paragraph--type--banner paragraph--view-mode--homepage">
          <div class="banner-des">
        <div class="des-container">
          
            <div class="clearfix text-formatted field field--name-field-title field--type-text field--label-hidden field__item"><div class="red-style">65 OR OLDER?</div></div>
      
          
            <div class="clearfix text-formatted field field--name-field-description field--type-text-long field--label-hidden field__item"><p><span>You may be at greater risk for pneumococcal pneumonia.</span><sup>1</sup><span> Vaccination may help protect you from the infection.</span></p></div>
      
          
            <div class="field field--name-field-link field--type-link field--label-hidden field__item"><a href="/pneumococcal-pneumonia" sc:linkname="home | banner navigation | pneumococcal-pneumonia" undefined="1">Learn More</a></div>
      
        </div>
      </div>
      
            <div class="field field--name-field-pc-image field--type-entity-reference field--label-hidden field__item"><article class="media media--type-image media--view-mode-default">
  
      
  <div class="field field--name-field-media-image field--type-image field--label-visually_hidden">
    <div class="field__label visually-hidden">Image</div>
              <div class="field__item">  <img src="/sites/default/files/2023-11/home_banner01_pc.jpg" width="1440" height="593" alt="home_banner01_pc.jpg" loading="lazy">

</div>
          </div>

  </article>
</div>
      
      
            <div class="field field--name-field-mb-image field--type-entity-reference field--label-hidden field__item"><article class="media media--type-image media--view-mode-default">
  
      
  <div class="field field--name-field-media-image field--type-image field--label-visually_hidden">
    <div class="field__label visually-hidden">Image</div>
              <div class="field__item">  <img src="/sites/default/files/2023-11/home_banner01_mb.jpg" width="390" height="390" alt="home_banner01_mb.jpg" loading="lazy">

</div>
          </div>

  </article>
</div>
      
      </div>
</div>
            </div>
```

```HTML
<div class="field field--name-field-link field--type-link field--label-hidden field__item"><a href="/pneumococcal-pneumonia" sc:linkname="home | banner navigation | pneumococcal-pneumonia" undefined="1">Learn More</a></div>

```
![[Pasted image 20231227162636.png]]