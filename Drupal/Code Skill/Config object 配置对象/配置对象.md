在 Drupal 中，配置对象是用于存储和管理网站配置信息的一种机制。这包括了站点设置（如站点名称和邮箱）、模块设置（例如模块特定的偏好）和功能配置（如内容类型、视图和字段定义）。配置对象允许 Drupal 将这些配置信息与内容信息（文章、用户等）分开管理，支持配置信息的版本控制、导出和迁移。

### 配置对象的类型

配置对象主要分为两类：

1. **简单配置（Simple configuration）**:
   - 用于存储不依赖于配置实体的网站配置。
   - 通常用于模块设置和偏好。
   - 存储为单个数据集，通常通过模块的 ==config/install== 目录下的 ==YAML== 文件来定义和初始化。
   - 可以通过 `Drupal::config()` 函数进行访问。

2. **配置实体（Configuration entities）**:
   - 用于存储有结构的、复杂的配置数据，如内容类型、视图和字段定义。
   - 可以有自己的字段和属性，支持列表和复杂结构。
   - 通常通过实体类型API来定义和管理。
   - 可以通过实体类型管理器 `Drupal::entityTypeManager()` 访问。

### 配置系统的工作原理

- **存储**: 配置数据存储在数据库中供网站运行时使用，同时也可以导出为 YAML 文件存储在文件系统中，以支持版本控制和配置同步。
- **管理**: Drupal 的配置管理系统提供了一个 UI（在管理界面中）用于导入和导出整站或部分配置，以及在不同环境（开发、测试、生产）间同步配置。
- **API 访问**: Drupal 提供了一系列 API 用于读取和写入配置数据。对于简单配置，可以使用 `Drupal::config()` 和 `Drupal::configFactory()->getEditable()` 来读取和写入配置。对于配置实体，通常通过实体API进行管理。

### 示例：访问和设置简单配置

以下是一个如何在 Drupal 中读取和设置简单配置的示例：

```php
// 读取配置
$config = \Drupal::config('my_module.settings');
$some_setting = $config->get('some_setting');

// 修改配置（注意：需要使用getEditable()而不是config()）
$config = \Drupal::configFactory()->getEditable('my_module.settings');
$config->set('some_setting', 'new_value')->save();
```
#### Case [[ConfigForm]]

### 存储方式

- **简单配置**存储在数据库的 `config` 表中，每条记录通常对应一个模块或功能的配置集，以 YAML 格式的文本串存储。这种配置适用于不需要频繁修改的设置，如模块设置、站点信息等。

- **配置实体**则采用更复杂的结构存储在数据库中，通常每种类型的配置实体会有其自己的数据库表，这些表存储实体的属性和字段。配置实体支持复杂的数据结构，比如字段、列表等，并且可以被程序化地创建、查询和管理。这使得配置实体非常适合存储如内容类型、视图、字段定义等结构化配置。

### 用途区别

- **简单配置**通常用于存储站点级别的全局设置，这些设置往往不需要复杂的数据结构来表示。

- **配置实体**则用于定义和存储系统的结构性元素，如内容类型、字段、表单和视图等。这些配置项通常具有内在的结构和层级关系，需要被以更结构化的方式管理。
### 配置同步

尽管简单配置和配置实体在存储和管理方式上有所不同，但它们都支持通过配置同步系统进行导出和导入，这使得可以在不同的环境之间轻松地迁移配置。配置导出为 YAML 文件，这些文件可以通过版本控制系统进行管理，以跟踪配置的变更和历史。
