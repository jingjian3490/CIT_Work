
Drupal 用户社区一直是 Drupal 发展和持续改进的关键。在本课程的最后一单元中，我们将解释积极参与 Drupal 社区的不同方式：报告模块中的错误或事件、创建和共享模块、创建和使用补丁、参与 Drupal 的翻译等等。

**单元内容**

45.1 Drupal 社区
45.2 报告事件
45.3 在 Drupal.org 上共享项目
45.4 创建和应用补丁
45.5 参与 Drupal 的翻译 
## 45.1 Drupal 社区

Drupal 用户社区一直是 Drupal 发展和持续改进的关键。参与社区的方式多种多样：帮助 Drupal 新手，组织活动，翻译模块，报告错误等等。

你可以在以下链接中找到一份关于参与社区的不同方式的入门指南（英文版）：

http://drupal.org/getting-involved-guide

我们以简要介绍 Drupal 社区的活动、协会和聚会场所开始本单元。

### 活动

根据地理范围的不同，Drupal 社区会组织各种类型的活动：

-   **DrupalCon**：Drupal 的国际盛会。这是一个全英文的活动，汇集了来自世界各地的人们。通常每年举办两次，一次在美国，一次在欧洲，不过有时也会扩展到其他大洲。
-   **DrupalCamp**：DrupalCamp 的范围通常是一个州，并以主办国的语言举行。例如，西班牙会举办 Drupalcamp Spain。
-   **DrupalCamp Spain**：第一届 DrupalCamp Spain 于 2010 年在巴塞罗那举行，西班牙 Drupal 协会（AED）也由此诞生。从那时起，AED 就一直为 Drupalcamp 的每年举办提供必要的支持（2010 年巴塞罗那，2011 年塞维利亚，2012 年马德里，2013 年卡塞雷斯，2014 年瓦伦西亚，2015 年赫雷斯，2016 年格拉纳达，2017 年马德里）。
-   **Drupal Developer Days**：此活动面向 Drupal 开发人员。这是一个国际性的活动，规模小于 DrupalCon，但也有来自其他国家的开发人员参加。
-   **Drupal Day**：此活动在西班牙举行，由 AED 推广。这是一个为期一天的活动，旨在为 Drupal 专业人士创造一个交流的空间。

以上只是围绕 Drupal 举办的一些活动。寻找你当地的社区，询问你所在地区即将举行的活动，或者，为什么不主动组织一次非正式聚会，结识其他 Drupal 用户和专业人士呢？

### Drupal 协会

我们主要介绍两个协会：

-   **Drupal 协会** (https://association.drupal.org)：Drupal 的国际协会，其使命是发展 Drupal。Drupal 协会接受两种类型的会员：个人和组织。无论是哪种类型，除了提供经济上的支持外，你还可以获得一个徽章，可以在你的网站、博客等地方使用。
-   **西班牙 Drupal 协会** (http://asociaciondrupal.es)：西班牙 Drupal 协会（AED）旨在成为西班牙 Drupal 爱好者和专业人士的参考和聚会场所。AED 的目标之一是为 DrupalCamp Spain 以及 Drupal Day 等其他活动的每年举办提供组织上的支持。

### 线上聚会场所

有很多方式可以与社区中的其他成员取得联系，无论是寻找信息、进行咨询、解决疑问、组织活动等等。以下列举了其中一些方式：

-   **Drupal.org** (https://www.drupal.org/)：Drupal 的主站点，英文版。拥有 drupal.org 的用户帐户对于参与本节介绍的许多工具至关重要。
-   **Drupal 论坛** (http://drupal.org/forum)：向其他用户寻求支持、发布专业服务等的基础平台。在这种媒介中，所有的交流都是用英文进行的。
-   **Drupal 群组** (http://groups.drupal.org/)：你可以加入任何你感兴趣的群组。你会发现国际性的英文群组，以及西班牙语的本地群组（西班牙协会、Drupalcamp Spain、马德里等等）。
-   **Google 群组**：在 Google 群组中，我们重点推荐“Drupal en Español”群组，这是一个主要用于技术咨询的聚会场所。
-   **Facebook 页面和群组**：在 Facebook 上，你会发现许多与 Drupal 相关的页面和群组。我们重点推荐“Drupal en Español”群组和 Drupal 的页面（英文版）。
-   **Twitter**：在 Twitter 上，你也可以关注许多 Drupal 专业人士。@drupal 是 drupal.org 的官方用户。社区中最常用的主题标签是 #drupal（国际）和 #drupal_es（西班牙语）。
-   **IRC**：完整的 IRC 频道列表可以在以下网址找到：http://drupal.org/node/679904。一些比较重要的频道有 #drupal-support、#drupal 和 #drupal-es（西班牙语）。
-   **Linkedin**：在这个职业社交网络上，你也可以找到讨论 Drupal 的群组。在“Drupal España”群组中，你会发现对 Drupal 开发人员的大量需求。
-   **Planet Drupal** (https://www.drupal.org/planet)：这是一个汇集了各种 Drupal 专业博客内容的页面（英文版）。
-   **Drupical** (https://www.drupical.com)：世界地图，上面标注了 Drupal 的 próximos 活动。从大型活动到小型活动，应有尽有。

## 45.2 报告事件

在每个项目（模块、主题、安装配置文件等）的官方页面上，我们可以通过事件队列（Issues）联系维护该项目的开发者，需要注意的是，所有的交流都必须使用英文。

管理事件队列有一些规则，因此我们始终建议阅读最新的信息，因为它可能会发生变化：

https://www.drupal.org/issue-queue

每个项目的事件队列都显示在右侧列中。

为了避免重复咨询，在发布任何事件之前，强烈建议先在任务列表中搜索一下，看看我们咨询的问题是否已经发布。此外，很可能问题已经在讨论中，甚至已经有人提供了解决方案。

要查找事件，请选择 Drupal 版本，并在“Search for”字段中输入部分错误信息或对错误的描述，请始终使用英文。

事件队列中不仅可以发布错误，还可以发布任务、新功能请求，甚至帮助或技术支持请求。你必须始终牢记，维护项目的人员都是完全无偿地进行工作，因此你不应要求或期望你的咨询一定会得到答复。

### 创建事件

要创建新事件，我们将使用“Create a new issue”链接，只有在我们之前登录系统后，此链接才可用。

请记住，事件必须用英文编写，并遵循一系列规则：

https://www.drupal.org/issue-queue/how-to

以下是一些需要填写的字段：

-   **项目信息**:

    -   **项目** (Project)：项目名称。如果我们从项目的页面创建事件，则无法更改此值。
    -   **版本** (Version)：选择你遇到事件的项目版本。
    -   **组件** (Component)：组件指的是项目中的类别。可用的值可能因项目而异。可能的值有：代码 (code)、文档 (documentation)、杂项 (Miscellaneous) 和用户界面 (User interface)。通常还包括项目的子模块。

-   **事件信息**:

    -   **类别** (Category)：可用的类别有：
        -   Bug report（报告错误）。
        -   Task（任务）。
        -   Feature request（请求新功能）。
        -   Support request（请求帮助）。
        -   Plan（计划）。
    -   **优先级** (Priority)：选择事件的优先级。请注意，优先级应根据发现的错误类型来设置，而不是根据你在项目中的特殊需求来设置。可能的值有：Normal（默认）、Critical、Major、Minor。
    -   **分配给** (Assigned)：如果这是一项你自己要做的工作，你可以通过此选项将任务分配给自己。
    -   **状态** (Status)：初始状态为活动 (active)。项目管理员可以更改此状态。

-   **事件详情**:

    -   **标题** (Title)：添加一个足以描述事件的标题。
    -   **描述** (Description)：详细说明事件。添加你认为合适的代码、错误链接等。使用提供的模板正确描述事件：https://www.drupal.org/node/1155816
    -   **标签** (Issue tags)：允许对事件进行分类。
    -   **附件** (File attachments)：添加你认为对解释事件有必要的附件。例如，错误截图、补丁等。

-   **父事件** (Parent issue)：如果存在包含当前事件的父事件，请在此处选择。

-   **相关事件** (Related issues)：如果存在相关事件，请在此处搜索并选择。

### 报告安全事件

切勿直接在事件队列中报告安全事件。在模块页面上，你会找到一个“Report a security vulnerability”链接，它会将你带到一个特定的表单。

请在以下网址查看完整的过程：

https://www.drupal.org/node/101494 


## 45.3 在 Drupal.org 上共享项目

社区工作的理念是“不竞争，合作”。因此，在创建新项目（模块、主题或安装配置文件）之前，请先查询是否已经存在类似的项目。如果是这样，那么为现有模块做出贡献，帮助维护和扩展它，比从头开始新的工作更有价值。

你可以在此处查阅在 Drupal.org 上共享项目的所有说明：

https://www.drupal.org/contribute-projects

特别要注意的是，请查阅创建和维护项目的最佳实践：

https://www.drupal.org/node/7765

### 模块文档

在 Drupal.org 上共享和维护项目远不止将代码上传到模块仓库。首先，项目必须有完善的文档，包括以下一些文件：

-   `README.txt`（必填）：==项目描述信息==、使用和安装说明等。
-   `INSTALL.txt`：这是一个可选文件，如果安装说明很长，并且希望将其与 `README.txt` 文件分开，则需要此文件。
-   项目页面：在项目页面上，我们将对项目进行简要描述。我们不应该写得太长，将完整的信息留给 `README.txt` 文件或项目的文档页面。
-   `CHANGELOG.txt`：记录项目中每个版本的更改。
-   Drupal.org 上的项目文档页面：项目可以在 Drupal.org 的文档区域中拥有一个部分。例如，它可以包含 `README.txt` 和 `INSTALL.txt` 文件中的信息。

### 编码标准

项目必须遵循本课程中已经学习过的编码标准。为此，建议使用 Coder 模块并检查代码是否正确。

### 翻译

还要记住，项目必须使用英文：变量和函数的名称、代码中的注释等。如果我们想将模块翻译成西班牙语，请生成翻译并将其分享到 localize.drupal.org。

### Git：项目仓库和版本控制

上传和共享 Drupal 相关项目的最佳位置是 Drupal.org 的官方仓库。如果你的模块不在此仓库中，则它将无法在 Drupal.org 上拥有自己的页面，因此也不会与其他模块一起被宣传。我们还必须记住，要将项目上传到官方仓库，必须使用 GNU GPL 版本 2 或更高版本许可证，这与 Drupal 的发行许可证相同。

如果模块包含无法使用此许可证分发的组件（例如，库），则可以共享模块基础部分，并在说明中详细说明如何下载和安装其他组件。

Drupal 使用的版本控制系统是 Git，它是一个免费的分布式版本控制系统，允许以分布式方式发布文件。开发人员可以在本地完整复制仓库，并在彼此之间以及与中央仓库共享已发布的更改。

要使用仓库，我们首先必须获得 Git 访问权限。我们可以在 Drupal.org 上编辑用户帐户时，从“Git access”选项卡进行操作。我们必须输入 Git 用户名，并接受使用条款。

你可以在以下网址找到有关申请 Git 访问权限的更多信息：

http://drupal.org/node/1047190

### Git 的安装和配置

要使用 Git，我们必须将其安装在我们的计算机上。请从 http://git-scm.com/ 下载适用于你的操作系统的最新版本。

安装完成后，访问 Git Bash 应用程序，我们将打开 Git 控制台或命令行，它使用 Linux 的常用命令（`ls`、`cd`、`mkdir` 等）。

在命令行中，我们必须设置 `user.name` 和 `user.email` 的值。请务必确保输入的电子邮件地址与我们的 Drupal 帐户的电子邮件地址相对应，因为帐户将通过此字段关联。

```bash
git config --global user.name "用户名"
git config --global user.email user@example.com
```

修改完这些配置参数后，我们可以使用以下命令检查参数是否已添加到 Git 中：

```bash
git config -l
```

Drupal.org 用户的密码也将是 Git 的密码。

Git 的安装和配置过程详见：

http://drupal.org/node/1022156

### 创建测试项目（沙盒）

Drupal 允许以沙盒或开发模式创建项目。这将使我们能够在将模块或主题代码作为完整项目（Full Project）与社区其他人共享之前对其进行试验。

http://drupal.org/node/1011196

即使模块处于沙盒模式，也可以通过模块仓库访问它，方法是在状态过滤器中选择“所有项目”或“仅沙盒项目”。

完整项目和沙盒项目之间的根本区别在于，在沙盒项目中，无法发布项目的版本。如果其他用户想要获取项目的代码，则只能使用 Git 下载它。

在访问仓库之前，我们需要创建一个开发项目（沙盒），方法是点击 [F45.3b] 中的“Add a new project (module, theme, distribution)”链接：

http://drupal.org/node/1068950

要创建项目，我们将选择其类型（模块、主题或安装配置文件等）、与其相关的类别、维护和开发状态，最后是项目的标题和描述 [F45.3c]。

我们创建了“Forcontu Test Project”项目，它将在本课程中用于对仓库进行测试。该模块可以在以下网址找到 [F45.3d]：

http://drupal.org/sandbox/forcontu/1483800

每个项目的“Version control”选项卡上都显示了从仓库下载项目的说明。由于我们尚未上传项目的代码，因此最初显示的说明解释了将项目上传到仓库的步骤 [F45.3e]。

建议为仓库创建一个根文件夹，用于存储与 Drupal.org 仓库同步的所有项目。

在本例中，我们创建了本地文件夹 `h:/workspace/drupal.org`，我们将在其中创建上传到（或下载自）Drupal.org 仓库的项目。在此文件夹中，我们添加了测试项目的文件夹 `forcontu_test_project`，其中已经包含了 `.info.yml`、`.module` 和 `.install` 文件。

要将模块文件夹与仓库同步，我们将从 Git 命令行访问该文件夹。使用 Linux 的常用命令导航到该文件夹。我们将按照项目页面上的说明进行操作，但请注意，我们已经创建了项目文件夹 [F45.3f]。

```bash
$ cd forcontu_test_project/
$ git init
Initialized empty Git repository in h:/workspace/drupal.org/forcontu_test_project/.git/
$ git add forcontu_test_project.info.yml
$ git add forcontu_test_project.module
$ git add forcontu_test_project.install
$ git commit -m "Initial commit."
[master (root-commit) e9b7b18] Initial commit.
3 files changed, 379 insertions(+), 0 deletions(-)
create mode 100644 forcontu_test_project.info.yml
create mode 100644 forcontu_test_project.install
create mode 100644 forcontu_test_project.module
$ git remote add origin forcontu@git.drupal.org:sandbox/forcontu/1483800.git
$ git push origin master
The authenticity of host 'git.drupal.org (145.29.10.6)' can't be established.
RSA key fingerprint is 69:35:9f:1b:a8:26:ad:6d:cc:93:29:25:6e:d7:25:2b.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'git.drupal.org,145.29.10.6' (RSA) to the list of known hosts.
forcontu@git.drupal.org's password:
Counting objects: 5, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (5/5), done.
Writing objects: 100% (5/5), 2.70 KiB, done.
Total 5 (delta 0), reused 0 (delta 0)
To forcontu@git.drupal.org:sandbox/forcontu/1483800.git
* [new branch] master -> master
```

F45.3f 将项目上传到仓库的命令

```
我们将在 Git 控制台中执行以下命令，在本地创建项目并将其上传到 Drupal.org 的仓库，以便它们保持同步。

在文件夹中，“git init”命令将为此特定项目初始化仓库，并创建 .git 文件夹（隐藏文件夹）。即使文件夹中包含文件，仓库最初也被视为是空的，必须使用“git add”命令添加每个文件。

添加文件后，使用“git commit”创建项目的第一个版本（提交）。

使用“git remote add origin”建立本地仓库和 Drupal.org 上的仓库之间的关系。

建立此关系后，使用“git push origin master”将本地更改（在初始提交中设置）上传到 Drupal.org 上的仓库。此时，需要对仓库的访问进行身份验证，这可以通过两种方法来完成：

-   定义 SSH 密钥。此机制允许通过本地计算机上定义的密钥直接进行身份验证。创建 SSH 密钥的过程详见：http://drupal.org/node/1027094。
-   Drupal.org 密码。提供访问仓库的密码，该密码与我们在 Drupal.org 上的用户密码相同。

在我们的示例中，我们使用了第二种方法。身份验证成功后，文件将被上传到版本服务器，以便任何用户都可以下载它们。
```

如果我们返回到项目的“Version control”选项卡，将会看到说明已更改。这些说明对所有项目都是通用的，允许社区中的任何用户对项目做出贡献、上传更改、补丁等 [F45.3g]。

### 更新项目中的更改

如果我们修改了项目本地版本中的任何文件，则需要将更改上传到仓库。将更改发布到项目的操作在英语中称为“commit”。

我们首先使用 `git add -A` 命令，该命令会在文件夹（和子文件夹）中搜索对项目进行的所有更改。

接下来，我们使用 `git commit -m "版本描述"` 定义提交。每次提交更改时，最好都说明一下所做的更改。如果更改是由其他用户完成的，则模块维护者可以决定是否在模块的下一个版本中应用此更改。

你可以在以下网址找到有关每个提交中消息应采用的格式的更多信息：http://drupal.org/node/52287。最短的版本是：

`Issue #[事件编号] by [参与解决方案的用户]：[所做更改的简短摘要]`。

最后，要将提交上传到版本服务器，我们将执行 `git push -u origin master` 命令。

```bash
$ git add -A
$ git commit -m "Issue #12 by forcontu: Added module dependencies."
[master a12ae35] Issue #12 by forcontu: Added module dependencies.
1 files changed, 1 insertions(+), 0 deletions(-)
$ git push -u origin master
forcontu@git.drupal.org's password:
Counting objects: 5, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 347 bytes, done.
Total 3 (delta 2), reused 0 (delta 0)
To forcontu@git.drupal.org:sandbox/forcontu/1483800.git
 e9b7b16..a12ae35 master -> master
Branch master set up to track remote branch master from origin.
```

上传到仓库的提交可以从项目页面右侧列（“View commits”）中查看 [F45.3h]。

在我们的示例中，我们将看到初始提交和第二个提交，以及相应的描述 [F45.3i]。

### 事件管理

项目发布后，其他用户可以通过事件队列（issues）提交事件。我们可以针对每个事件与其他用户进行积极的对话，始终使用英文，以查明事件的根源或可能的解决方案 [F45.3j]。

解决事件后，我们会将其状态更改为“fixed”（已修复），或任何其他可用状态。如果事件的修复与提交相关联，则最好在提交的描述文本中指明事件编号以及参与识别和解决事件的用户 [F45.3k]。

两周内没有活动的事件将自动关闭，并转换为“closed (fixed)”状态。我们可以随时重新打开事件并继续处理它。 

## 45.4 创建和应用补丁

### 下载其他项目

如果我们想要为其他项目的代码修改做出贡献,首先需要将其下载到我们的本地 Git 仓库中。在每个项目页面的 Version control 标签页中可以找到下载其他项目的指令。

执行 "git clone" 命令后,我们就可以在本地获得从远程仓库获取的模块的最新版本。下载文件时不需要进行身份验证,只有在上传文件时才需要。

```
$ git clone --branch master http://git.drupal.org/sandbox/forcontu/1483800.git forcontu_test_project
Cloning into 'forcontu_test_project'...
remote: Counting objects: 8, done.
remote: Compressing objects: 100% (8/8), done.
remote: Total 8 (delta 2), reused 0 (delta 0)
Unpacking objects: 100% (8/8), done.
$ cd forcontu_test_project/
$ ls
forcontu_test_project.info forcontu_test_project.install forcontu_test_project.module
```
用于下载项目的 Git 命令。下载完成后,我们就可以从本地计算机访问所有文件。

### ==什么是补丁==(patch)

补丁是评估同一文件(或一组文件)两个版本之间差异的结果。这个结果使用 "==git diff==" 命令生成,并以文本文件的形式存储,扩展名为 .patch,其结构如下
```
diff --git a/token_example/token_example.tokens.inc b/token_example/token_example.tokens.inc
index 585dcea..b06d9d6 100644
--- a/token_example/token_example.tokens.inc
+++ b/token_example/token_example.tokens.inc
@@ -13,8 +13,8 @@ function token_example_token_info() {
// second is the user's default text format, which is itself a 'format' token
// type so it can be used directly.

// 将被删除的原始文件中的注释

// 原始文件中不存在的新代码行
// 将在应用补丁时添加到文件中
$info['types']['format'] = [
  'name' => t('Text formats'),
  'description' => t('Tokens related to text formats.'),
```

.patch 文件示例。补丁显示原始文件和新文件之间的差异。前几行标识正在修改的文件,在示例中是 token_example/tokem_example.tokens.inc。

```
diff --git a/token_example/token_example.tokens.inc b/token_example/token_example.tokens.inc
index 585dcea..b06d9d6 100644
--- a/token_example/token_example.tokens.inc
+++ b/token_example/token_example.tokens.inc
```

==以== --- 开头的行表示将被 +++ 行替换。下一行表示更改位于 token_example_token_inf() 函数内,第 11 行。

```
@@ -13,8 +13,8 @@ function token_example_token_info() {
```

==以== - 开头的行将被删除。

```
// 将被删除的原始文件中的注释
```

==以== + 开头的行将在指定位置添加到文件中。

```
// 原始文件中不存在的新代码行
// 将在应用补丁时添加到文件中
```

没有包含任何符号的行将保持与原始文件相同。在最终文件中不会显示这些前面的标签(+++, ---, +, -, 等),它们仅用于在补丁中标记更改。

### 使用 Git 创建补丁

当在模块中发现错误并需要修改时,Drupal 中需要补丁。我们可能会遇到两种情况,取决于我们是作为补丁的提供者还是消费者:

1. 我们在模块中发现了一个错误,并想提供解决方案以便将其纳入模块的下一个版本。在这种情况下,我们将创建一个补丁并通过模块的问题队列共享。

2. 用户通过问题队列提供了一个尚未包含在模块下一个版本中的补丁。如果我们想修复这个错误,我们需要在我们网站的模块中应用这个补丁。

创建补丁的命令在我们正在修改的模块的 Version control 标签页中详细说明。

创建补丁
使用 Git 创建补丁的说明包含在模块的 Version control 标签页中,但对所有模块都是通用的。

为补丁使用适当的名称很重要。一个好的做法是使用以下命名约定:

[模块]-[描述]-[问题编号]-[评论编号].patch

例如,一个与标题相关的 Pathauto 模块补丁,将在问题 #12345 的评论 #95 中发布,应该命名为:

pathauto-titles-12345-94.patch

在这个页面上你可以找到更多关于发布补丁的最佳实践信息:http://drupal.org/patch/submit

要创建补丁,首先我们修改之前从仓库下载的项目文件。"git diff" 命令将负责生成包含差异的补丁[F45.4e]:

```
$ git diff > forcontu_test_project-dependencies-1485186-2.patch
$ ls
forcontu_test_project-dependencies-1485186-2.patch forcontu_test_project.install
forcontu_test_project.info forcontu_test_project.module
```

F45.4e 使用 Git 创建补丁
使用 Git 创建补丁的命令。补丁将在模块文件夹中生成。

在我们的示例中,我们修改了 forcontu_test-project.info 文件以删除对 views 模块的依赖,并添加对 panels 和 pathauto 的依赖[F45.4f]。

```
diff --git a/forcontu_test_project.info b/forcontu_test_project.info
index f38e594..aab5a2c 100644
--- a/forcontu_test_project.info
+++ b/forcontu_test_project.info
@@ -2,5 +2,6 @@ name = "Forcontu Test Project"
description = "Test project for educational purposes"
core = 6.x
files[] = forcontu_test_project.module
-dependencies[] = views
+dependencies[] = panels
+dependencies[] = pathauto
package = My Modules
\ No newline at end of file
```

F45.4f 创建的补丁
使用 Git 创建的补丁示例。

### 将补丁附加到问题

与其他用户或项目维护者共享补丁以便在模块的后续版本中考虑的方式是通过问题队列。当我们将补丁附加到问题时,我们应该将状态更改为 "Needs review" 或 "Needs work"。这样,补丁将由自动补丁检查系统进行审核。这个系统不适用于 Sandbox 项目,它检查补丁是否正确生成,为项目维护者节省了工作[F45.4g]。

F45.4g 发布补丁
补丁作为附件发布到问题中。

### 应用补丁

使用 git 应用补丁非常简单。首先,我们将下载为其创建补丁的模块版本。可以从模块页面下载模块,也可以使用 Git 从仓库下载。然后,我们将补丁(.patch 文件)下载到模块文件夹中。补丁通常可以在模块问题的评论中找到。

在 Git 控制台中,我们将输入以下命令:

```
$ git apply -v [补丁名称.patch]
$ rm [补丁名称.patch]
```

建议在应用后删除补丁(使用 "rm" 命令)。

应用补丁后,我们将修改后的模块上传到我们的网站。一般来说,不应该直接在生产服务器上应用补丁,或者至少应该采取适当的预防措施,比如对网站进行备份。

## 45.5 参与 Drupal 的翻译

另一种为社区做出贡献的方式是提供和审核 Drupal 的翻译,包括核心和贡献模块。

所有 Drupal 版本的翻译都通过 localize.drupal.org 进行管理。虽然下载核心和贡献模块的翻译不需要强制注册,但注册并加入翻译组后,将启用新的翻译导入和导出选项。

访问 localize.drupal.org 使用与 drupal.org 相同的用户。创建帐户后,我们可以通过在语言主页上寻找 Join 按钮来加入任何语言的翻译组。

加入翻译组后,我们可以看到 Translate、Import 和 Export 标签页。

从 Translate 标签页,我们可以通过添加核心或贡献模块的翻译来协作。添加的翻译将进入翻译队列,由翻译审核员负责审核和批准。只有在获得批准后,添加的翻译才能在相应的 .po 文件中下载。

我们有一个完整的搜索器来定位要翻译的字符串,例如属于特定模块的字符串。点击 "Reveal more filters" 将显示更多搜索选项。

从 Import 标签页,我们可以将 .po 文件导入到项目中。这样,我们在此文件中添加的所有新翻译都将作为建议添加。如果我们已经在我们的网站上通过 "翻译界面" 工具翻译了字符串,并希望通过批量添加翻译建议来为项目做出贡献,这可能会很有用。

访问 Export 标签页,我们可以选择要获取最新可用翻译的项目和版本,我们将获得一个 .po 文件。如果我们选择 Drupal core 项目,我们可以下载系统核心的最新翻译版本。

这种方法真正有趣的是,我们可以下载翻译建议,这些是尚未被审核员批准的翻译。这将允许我们获得更完整的翻译(就翻译文本的数量而言)。但另一方面,它可能包含翻译错误。

### 申请审核权限

每个组都有自己的翻译审核规则。审核员对于审核和批准其他用户提交的翻译至关重要。如果你想参与成为翻译审核员,你必须向该组的任何管理员提出申请。在西班牙语翻译组中,你可以在此页面发表评论进行申请:

http://localize.drupal.org/node/115