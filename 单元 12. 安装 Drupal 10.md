
在本单元中，将逐步解释如何用西班牙语安装 Drupal 10。安装完成后，将进行初始配置，我们将在课程中逐步完成这些配置。

首先，我们将看到如何在远程服务器上（专用服务器、VPS、云或共享主机）安装 Drupal 10，假设提供商或系统管理员已经提供了以下信息：
- 一个允许我们直接在服务器上执行控制台命令的 SSH 访问权限。
- MySQL/MariaDB 数据库的配置数据（用户、密码和数据库名称），我们将在其中安装 Drupal。

如果你正在参加 Forcontu 的任何在线课程（www.forcontu.com），你将获得一个远程网络托管服务，在那里你需要安装 Drupal 并完成我们将在每个单元中提出的活动。
#### 单元内容
12.1 使用 Composer 安装 Drupal 10  
12.2 从界面完成 Drupal 10 的安装  
12.3 从控制台完成 Drupal 10 的安装  
12.4 访问状态报告  
12.5 备份  
12.6 更新核心和贡献模块  
12.7 补丁

### 12.1 使用 Composer 安装 Drupal 10

Drupal 已经发展到其内部和外部组件之间的依赖关系越来越多且复杂的程度。如果我们使用 Composer 来管理整个系统，安装新模块和完整更新系统将变得更加简便。在本课程中，我们将重点介绍如何使用 Composer 来安装和管理 Drupal 10。

#### 什么是 Composer

Composer 是一个用于 PHP 应用程序的依赖管理工具。Composer 负责下载项目所需的包和库，并下载每个模块或库可能需要的额外依赖项。通过 Composer，我们还可以更新 Drupal 核心、安装新模块或更新现有模块。

Composer 从控制台执行，通过 SSH 连接到远程服务器。

[使用 Composer 安装 Drupal 和管理依赖项](https://www.drupal.org/docs/develop/using-composer/using-composer-to-install-drupal-and-managedependencies)

#### 第一步：使用 Composer 下载 Drupal 核心

使用命令 `composer create-project` 创建项目并指定要安装的 Drupal 版本（如果不是最新的稳定版本）。例如，要在文件夹 `public_html/be/be1` 中安装最新版本的 Drupal 10，我们将在母文件夹（`public_html/be`）中执行以下命令：

```sh
$ cd public_html/be/
$ composer create-project drupal/recommended-project be1
```

输出示例：

```
Creating a "drupal/recommended-project" project at "./be1"
Info from https://repo.packagist.org:
Installing drupal/recommended-project (10.0.3)
 - Installing drupal/recommended-project (10.0.3): Extracting archive
Created project in /home/d10/public_html/be/be1
Installing dependencies from lock file (including require-dev)
Verifying lock file contents can be installed on current platform.
Package operations: 54 installs, 0 updates, 0 removals
 - Installing composer/installers (v2.2.0): Extracting archive
 - Installing drupal/core-composer-scaffold (10.0.3): Extracting archive
 - Installing drupal/core-project-message (10.0.3): Extracting archive
 - Installing symfony/polyfill-mbstring (v1.27.0): Extracting archive
 - Installing symfony/polyfill-ctype (v1.27.0): Extracting archive
 - Installing twig/twig (v3.5.0): Extracting archive
...
Congratulations, you’ve installed the Drupal codebase
from the drupal/recommended-project template!
```

从这一点开始，我们需要从项目文件夹中执行所有 Composer 命令，在我们的示例中是 `be1`。

在安装后返回的消息中，我们找到了“下一步”块：

```
 * Remove the plugin that prints this message:
   composer remove drupal/core-project-message
```

我们将执行指示的命令以删除消息（记得先进入 `be1` 文件夹）：

```sh
$ cd be1
$ composer remove drupal/core-project-message
```

输出示例：

```
./composer.json has been updated
Running composer update drupal/core-project-message
Loading composer repositories with package information
Updating dependencies
Lock file operations: 0 installs, 0 updates, 1 removal
 - Removing drupal/core-project-message (10.0.3)
Writing lock file
...
Error could not delete default.services.yml
```

从 Drupal 8.8 开始存在一个已知错误，可能会在某个 Drupal 10 版本中解决。错误在执行类似上述的 Composer 命令时显示，并阻止真正的执行：

```
[RuntimeException]
  Could not delete .../web/sites/default/default.services.yml:
```

文件夹 `sites/default` 是只读的。然而，Composer 需要写入它，这迫使我们手动更改权限，使用前面的命令。如果遇到错误，请先尝试执行以下命令：

```sh
$ chmod u+w web/sites/default
```

然后重新执行前面的 `composer remove` 命令。

如果我们希望在开发环境中永久更改此设置，可以在 `settings.php` 文件中添加以下配置变量：

```php
$settings['skip_permissions_hardening'] = TRUE;
```